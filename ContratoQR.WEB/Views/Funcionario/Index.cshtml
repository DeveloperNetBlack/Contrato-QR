@using ContratoQR.Entity
@using GridMvc
@model PersonalViewModel

<div class="row">
    <div class="col-md-12">
        <div class="card border-light mb-3">
            <div class="card-content">
                <h4 class="card-title">Consultar Funcionario</h4>
                <div class="row" style="margin-top: 2rem; margin-bottom: 3rem;">
                    @using (Html.BeginForm("GetFuncionario", "Funcionario", FormMethod.Post))
                    {
                        <div class="row">
                            <div class="form-group col-md-3">
                                <label for="txtRut">Rut</label>
                                @Html.TextBoxFor(m => m.RutFuncionario, new { @class = "form-control" })
                            </div>
                            <div class="form-group col-md-3">
                                <label for="txtNombre">Nombre Funcionario</label>
                                @Html.TextBoxFor(m => m.NombreFuncionario, new { @class = "form-control" })
                            </div>
                            <div class="form-group col-md-3 left-align">
                                <button class="btn btn-info" type="submit">
                                    Buscar
                                </button>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" style="margin-bottom: 3rem;">
    <div class="form-group col-md-6 left-align">
        <a class='btn btn-info' t href='Funcionario/Create'>Nuevo</a>
    </div>
</div>

@await Html.Grid(Model.ListaPersonal).Columns(c =>
{
    c.Add(model => model.RutFuncionario).Titled("Rut").SetWidth(150);
    c.Add(model => model.NombreFuncionario).Titled("Nombre").SetWidth(150);
    c.Add
    (
        model => model.UrlContrato
    )
    .Titled("Url Contrato")
    .SetWidth(150)
    .Encoded(false)
    .Sanitized(false)
    .RenderValueAs(o => $"<b><a class='modal_link' target='_blank' href='{o.UrlContrato}'>Ver Contrato</a></b>");
    c.Add()
        .Encoded(false)
        .Sanitized(false)
        .SetWidth(30)
        .RenderValueAs(o => $"<b><a class='modal_link' href='Funcionario/Edit?rutPersonal={o.RutFuncionario}'>Editar</a></b>");
}).WithPaging(20).EmptyText("No se encontraron registros").RenderAsync()

